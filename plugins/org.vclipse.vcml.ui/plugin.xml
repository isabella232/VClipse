<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<!--
    Copyright (c) 2010 webXcerpt Software GmbH.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html
   
    Contributors:
       webXcerpt Software GmbH - initial creator
 -->
<plugin>
   <extension-point id="outlinePageActions" name="Outline page actions" schema="schema/outlinePageActions.exsd"/>

    <extension
            point="org.eclipse.ui.editors">
        <editor
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.XtextEditor"
              contributorClass="org.eclipse.ui.editors.text.TextEditorActionContributor"
              default="true"
              extensions="vcml"
              icon="icons/vcml.png"
              id="org.vclipse.vcml.VCML"
              name="VCML Editor">
        </editor>
    </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.vclipse.ui.commands.cleanUpDepedencyCode"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Ctrl+Shift+D">
      </key>
   </extension>
   <extension
        point="org.eclipse.ui.handlers">
        <handler
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.hyperlinking.OpenDeclarationHandler"
            commandId="org.eclipse.xtext.ui.editor.hyperlinking.OpenDeclaration">
            <activeWhen>
                <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
                </reference>
            </activeWhen>
        </handler>
        <handler
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.handler.ValidateActionHandler"
            commandId="org.vclipse.vcml.VCML.validate">
         <activeWhen>
            <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
            </reference>
         </activeWhen>
      </handler>
        <handler
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.findrefs.FindReferencesHandler"
              commandId="org.eclipse.xtext.ui.editor.FindReferences">
           <activeWhen>
              <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
              </reference>
           </activeWhen>
        </handler>
        <handler
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.outline.quickoutline.ShowQuickOutlineActionHandler"
              commandId="org.eclipse.xtext.ui.editor.outline.QuickOutline">
           <activeWhen>
              <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
              </reference>
           </activeWhen>
        </handler>
        <handler
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.refactoring.ui.IRenameElementHandler"
              commandId="org.eclipse.xtext.ui.refactoring.RenameElement">
           <activeWhen>
              <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
              </reference>
           </activeWhen>
        </handler>
        <handler
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.editor.CleanUpDependenciesHandler"
              commandId="org.vclipse.ui.commands.cleanUpDepedencyCode">
           <activeWhen>
              <or>
                 <reference
                       definitionId="org.vclipse.vcml.VCML.Editor.opened">
                 </reference>
                 <instanceof
                       value="org.eclipse.core.resources.IResource">
                 </instanceof>
              </or>
           </activeWhen>
        </handler>
    </extension>
    <extension point="org.eclipse.core.expressions.definitions">
        <definition id="org.vclipse.vcml.VCML.Editor.opened">
            <and>
                <reference definitionId="isActiveEditorAnInstanceOfXtextEditor"/>
                <with variable="activeEditor">
                    <test property="org.eclipse.xtext.ui.editor.XtextEditor.languageName" 
                        value="org.vclipse.vcml.VCML" 
                        forcePluginActivation="true"/>
                </with>        
            </and>
        </definition>
    </extension>
    <extension
            point="org.eclipse.ui.preferencePages">
        <page
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.preferences.LanguageRootPreferencePage"
            id="org.vclipse.preferences.page"
            name="VClipse">
            <keywordReference id="org.vclipse.vcml.ui.keyword_VCML"/>
        </page>
        <page
              category="org.vclipse.preferences.page"
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.preferences.LanguageRootPreferencePage"
              id="org.vclipse.preferences.page.vcmlTextEditor"
              name="VCML Text Editor">
        </page>
        <page
            category="org.vclipse.preferences.page.vcmlTextEditor"
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.syntaxcoloring.SyntaxColoringPreferencePage"
            id="org.vclipse.vcml.coloring.page"
            name="Syntax Coloring">
            <keywordReference id="org.vclipse.vcml.ui.keyword_VCML"/>
        </page>
        <page
            category="org.vclipse.preferences.page.vcmlTextEditor"
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.templates.XtextTemplatePreferencePage"
            id="org.vclipse.vcml.templates.page"
            name="Templates">
            <keywordReference id="org.vclipse.vcml.ui.keyword_VCML"/>
        </page>
        <page
              category="org.vclipse.preferences.page"
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.preferences.LanguageRootPreferencePage"
              id="org.vclipse.preferences.page.sap"
              name="SAP">
        </page>
        <page
              category="org.vclipse.preferences.page.sap"
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.preferences.SapOptionsPreferencePage"
              id="org.vclipse.preferences.page.sap.options"
              name="Options">
        </page>
        <page
              category="org.vclipse.preferences.page.sap"
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.preferences.SapDefaultSettingsPreferencePage"
              id="org.vclipse.preferences.page.sap.defaultSettings"
              name="Default Settings">
        </page>
        <page
              category="org.vclipse.preferences.page.vcmlTextEditor"
              class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.refactoring.ui.RefactoringPreferencePage"
              id="org.vclipse.vcml.VCML.refactoring"
              name="Refactoring">
           <keywordReference
                 id="org.vclipse.vcml.ui.keyword_VCML">
           </keywordReference>
        </page>
    </extension>
    <extension
        point="org.eclipse.ui.keywords">
        <keyword
            id="org.vclipse.vcml.ui.keyword_VCML"
            label="VCML"/>
    </extension>
    <extension
         point="org.eclipse.ui.commands">
       <category
             description="VClipse Commands"
             id="org.vclipse.ui.commands"
             name="VClipse">
       </category>
      <command
            description="Trigger expensive validation"
            id="org.vclipse.vcml.VCML.validate"
            name="Validate">
      </command>
      <command
            description="Open the quick outline."
            id="org.eclipse.xtext.ui.editor.outline.QuickOutline"
            name="Quick Outline">
      </command>
      <command
            categoryId="org.vclipse.ui.commands"
            defaultHandler="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.editor.CleanUpDependenciesHandler"
            description="Delete not required dependency code for a vcml source file"
            id="org.vclipse.ui.commands.cleanUpDepedencyCode"
            name="Clean Up Dependency Code">
      </command>
    </extension>
    <extension point="org.eclipse.ui.menus">
        <menuContribution
            locationURI="popup:#TextEditorContext?after=group.edit">
             <command
                 commandId="org.vclipse.vcml.VCML.validate"
                 style="push"
                 tooltip="Trigger expensive validation">
            <visibleWhen checkEnabled="false">
                <reference
                    definitionId="org.vclipse.vcml.VCML.Editor.opened">
                </reference>
            </visibleWhen>
         </command>  
         </menuContribution>
        <menuContribution
              locationURI="popup:#TextEditorContext?endof=group.find">
           <command
                 commandId="org.eclipse.xtext.ui.editor.FindReferences">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="org.vclipse.vcml.VCML.Editor.opened">
                 </reference>
              </visibleWhen>
           </command>
        </menuContribution>
        <menuContribution
              locationURI="popup:#TextEditorContext?after=group.edit">
           <command
                 commandId="org.eclipse.xtext.ui.refactoring.RenameElement"
                 style="push">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="org.vclipse.vcml.VCML.Editor.opened">
                 </reference>
              </visibleWhen>
           </command>
        </menuContribution>
        <menuContribution
              locationURI="popup:#TextEditorContext?after=group.open">
           <command
                 commandId="org.eclipse.xtext.ui.editor.outline.QuickOutline"
                 style="push"
                 tooltip="Open Quick Outline">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="org.vclipse.vcml.VCML.Editor.opened">
                 </reference>
              </visibleWhen>
           </command>
        </menuContribution>
        <menuContribution
              locationURI="popup:#TextEditorContext?after=group.edit">
           <command
                 commandId="org.vclipse.ui.commands.cleanUpDepedencyCode"
                 label="Clean Up Dependency Code"
                 style="push">
              <visibleWhen
                    checkEnabled="false">
                 <reference
                       definitionId="org.vclipse.vcml.VCML.Editor.opened">
                 </reference>
              </visibleWhen>
           </command>
        </menuContribution>
    </extension>

<!-- adding resource factories -->

	<extension
		point="org.eclipse.emf.ecore.extension_parser">
		<parser
			class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.resource.IResourceFactory"
			type="vcml">
		</parser>
	</extension>
	<extension point="org.eclipse.xtext.extension_resourceServiceProvider">
        <resourceServiceProvider
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.resource.IResourceUIServiceProvider"
            uriExtension="vcml">
        </resourceServiceProvider>
    </extension>
 <extension
       point="org.eclipse.core.runtime.preferences">
    <initializer
          class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.preferences.PreferencesInitializer">
    </initializer>
 </extension>
 <extension
       point="org.eclipse.ui.views">
    <category
          id="org.vclipse.views.category"
          name="VClipse">
    </category>
 </extension>




	<!-- Quick Outline -->
   <!-- quickfix marker resolution generator -->
   <extension
         point="org.eclipse.ui.ide.markerResolution">
      <markerResolutionGenerator
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.quickfix.MarkerResolutionGenerator">
      </markerResolutionGenerator>
   </extension>
   	<!-- Rename Refactoring -->

  <extension point="org.eclipse.compare.contentViewers">
    <viewer id="org.vclipse.vcml.VCML.compare.contentViewers"
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.compare.InjectableViewerCreator"
            extensions="vcml">
    </viewer>
  </extension>
  <extension point="org.eclipse.compare.contentMergeViewers">
    <viewer id="org.vclipse.vcml.VCML.compare.contentMergeViewers"
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.compare.InjectableViewerCreator"
            extensions="vcml" label="VCML Compare">
     </viewer>
  </extension>
  <extension point="org.eclipse.ui.editors.documentProviders">
    <provider id="org.vclipse.vcml.VCML.editors.documentProviders"
            class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.eclipse.xtext.ui.editor.model.XtextDocumentProvider"
            extensions="vcml">
    </provider>
  </extension>
 <extension
       point="org.eclipse.ui.perspectives">
    <perspective
          class="org.vclipse.vcml.ui.VClipsePerspectiveFactory"
          fixed="false"
          id="org.vclipse.perspective"
          name="VClipse">
    </perspective>
 </extension>
 <extension
       point="org.eclipse.ui.popupMenus">
    <objectContribution
          adaptable="true"
          id="org.vclipse.vcml.popupMenu.resourceContribution"
          objectClass="org.eclipse.core.resources.IResource">
       <menu
             icon="icons/vcml.png"
             id="org.vclipse.vcml.ui.popupMenu.resource"
             label="VClipse"
             path="additions">
          <groupMarker
                name="deployment">
          </groupMarker>
          <separator
                name="org.vclipse.vcml.ui.deploymentSeparator">
          </separator>
          <groupMarker
                name="content">
          </groupMarker>
          <separator
                name="org.vclipse.vcml.ui.additionsSeparator">
          </separator>
          <separator
                name="additions">
          </separator>
       </menu>
       <action
             class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.editor.CleanUpDepencyCodeAction"
             definitionId="org.vclipse.ui.commands.cleanUpDepedencyCode"
             icon="icons/actions/delete.png"
             id="org.vclipse.ui.actions.CleanUpDependencyCode"
             label="Clean Up Dependency Code"
             menubarPath="org.vclipse.vcml.ui.popupMenu.resource/additions">
          <enablement>
             <or>
                <objectClass
                      name="org.eclipse.core.resources.IContainer">
                </objectClass>
                <and>
                   <objectClass
                         name="org.eclipse.core.resources.IFile">
                   </objectClass>
                   <objectState
                         name="extension"
                         value="vcml">
                   </objectState>
                </and>
             </or>
          </enablement>
       </action>
    </objectContribution>
 </extension>
 <extension
       point="org.eclipse.ui.importWizards">
    <category
          id="org.vclipse.vcml.ui.wizards.imports"
          name="VClipse">
    </category>
 </extension>

  <extension
        point="org.eclipse.ltk.core.refactoring.renameParticipants">
     <renameParticipant
           class="org.vclipse.vcml.ui.VCMLExecutableExtensionFactory:org.vclipse.vcml.ui.refactoring.VcmlRenameDependencyParticipant"
           id="org.vclipse.vcml.ui.renameDependency"
           name="Rename dependency">
        <enablement>
           <and>
              <adapt
                    type="org.eclipse.core.resources.IResource">
              </adapt>
              <or>
                 <test
                       property="org.eclipse.core.resources.extension"
                       value="proc">
                 </test>
                 <test
                       property="org.eclipse.core.resources.extension"
                       value="cons">
                 </test>
                 <test
                       property="org.eclipse.core.resources.extension"
                       value="sel">
                 </test>
                 <test
                       property="org.eclipse.core.resources.extension"
                       value="pre">
                 </test>
              </or>
           </and>
        </enablement>
     </renameParticipant>
  </extension>
 
</plugin>
